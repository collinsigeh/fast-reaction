<!doctype html>
<html>
    <head>
        <meta charset="utf-8">

        <title>Fast Reaction Game</title>

        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet"> 
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <div id="title" class="container">
            <h1>Fast Finger Game</h1>
        </div>

        <div id="playerPerformance" class="container">
            Your average speed is <span id="averageSpeed">4s</span>
        </div>

        <div id="instructions" class="container">
            <h2>Instructions</h2>
            <ul>
                <li>This game tests your reaction by measuring how fast you can click on the shape as it appears.</li>
                
                <li>Click on the shape that appears as fast as you can.</li>

                <li>Start playing by clicking the "Start Game" button below.</li>

                <li>When you wish to stop playing, click on the "End Game" button.</li>
            </ul>
        </div>

        <div id="actionButtons" class="container">
            <button id="startGame">Start Game</button>

            <button id="endGame">End Game</button>
        </div>

        <div id="activeRegion" class="container">
            <div id="shape"></div>
        </div>

        <script type="text/javascript">

            var totalTime = 0;
            var numberOfClicks = 0;
            var cycleDuration = 0;
            var cycleStart = 0;
            var cycleEnd = 0;

            function getTime(){

                return new Date().getTime();
            }

            function getRandomColor() {
                var letters = '0123456789ABCDEF';
                var color = '#';
                for (var i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }

            function makeShape(){

                var top = Math.floor(Math.random() * 326);
                var left = Math.floor(Math.random() * 326);
                var width = 30 + Math.floor(Math.random() * 46);
                var height = 30 + Math.floor(Math.random() * 46);
                var borderRadius = Math.floor(Math.random() * 101);

                document.getElementById('shape').style.top = top + "px";
                document.getElementById('shape').style.left = left + "px";
                document.getElementById('shape').style.width = width + "px";
                document.getElementById('shape').style.height = height + "px";
                document.getElementById('shape').style.borderRadius = borderRadius + "%";
                document.getElementById('shape').style.backgroundColor = getRandomColor();
                
                document.getElementById('shape').style.display = "block";
            }

            document.getElementById('startGame').onclick = function(){
                
                numberOfClicks = 0;

                document.getElementById('startGame').style.display = "none";

                document.getElementById('instructions').style.display = "none";

                document.getElementById('endGame').style.display = "inline-block";

                document.getElementById('activeRegion').style.display = "block";

                document.getElementById('playerPerformance').style.display = "none";

                makeShape();

                cycleStart = getTime();
            }

            document.getElementById('shape').onclick = function(){

                document.getElementById('shape').style.display = "none";

                numberOfClicks++;

                cycleEnd = getTime();

                cycleDuration = cycleEnd - cycleStart;

                totalTime += cycleDuration;

                makeShape();
            }
            
            document.getElementById('endGame').onclick = function(){

                document.getElementById('endGame').style.display = "none";

                document.getElementById('instructions').style.display = "block";

                document.getElementById('startGame').style.display = "inline-block";

                document.getElementById('activeRegion').style.display = "none";

                document.getElementById('playerPerformance').style.display = "block";

                if(numberOfClicks <= 0)
                {
                    document.getElementById('averageSpeed').innerHTML = "unkown. Play the game to find out.";
                }
                else
                {
                    totalTime = Math.round(totalTime/1000);

                    document.getElementById('averageSpeed').innerHTML = numberOfClicks + " clicks in " + totalTime + " secs.";
                }
            }
        </script>
    </body>
</html>